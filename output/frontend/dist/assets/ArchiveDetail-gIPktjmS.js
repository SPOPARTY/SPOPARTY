import{_ as $,j as F,r as k,b as o,o as s,d,e,f as l,g as c,t as p,i as M,s as x,k as g}from"./index-w_VBQHr5.js";import{u as P}from"./archives-FApP3BGQ.js";import{f as q}from"./tools-kf-cGsju.js";const z=["src"],G={__name:"ArchiveDetail",props:{detail:Object},emits:["detail-close"],setup(w,{emit:h}){const y=P(),C=F(),U=localStorage.getItem("id"),V=C.params.clubId,f=k(!0),t=w,I=h,j=async i=>{const _=await(await fetch(i)).blob(),r=window.URL.createObjectURL(_),n=document.createElement("a");n.href=r,n.download="video.mp4",n.click()},A=async i=>{const _=await(await fetch(i)).blob(),r=window.URL.createObjectURL(_),n=document.createElement("a");n.href=r,n.download="image.jpg",n.click()};k(!1);function R(i){confirm("우리들의 추억이 사라집니다")===!0&&y.deleteArchive(i,V)}function v(){f.value=!1,I("detail-close")}return(i,a)=>{const _=o("v-card-title"),r=o("v-col"),n=o("v-icon"),m=o("v-btn"),T=o("v-row"),D=o("v-img"),L=o("v-card-item"),b=o("v-card-subtitle"),S=o("v-card-text"),B=o("v-spacer"),E=o("v-card-actions"),N=o("v-card"),O=o("v-dialog");return s(),d(O,{modelValue:f.value,"onUpdate:modelValue":a[3]||(a[3]=u=>f.value=u),"max-width":"600px","max-height":"500px","onClick:outside":v,persistent:""},{default:e(()=>[l(N,null,{default:e(()=>[l(T,null,{default:e(()=>[l(r,{cols:"10",style:{"margin-left":"0px","padding-left":"230px"}},{default:e(()=>[l(_,null,{default:e(()=>[c(p(t.detail.fixtureTitle),1)]),_:1})]),_:1}),l(r,{cols:"2",style:{"margin-top":"5px"}},{default:e(()=>[l(m,{ripple:!1,onClick:v,class:"no-background-hover"},{default:e(()=>[l(n,null,{default:e(()=>[c("mdi-close")]),_:1})]),_:1})]),_:1})]),_:1}),t.detail?(s(),d(L,{key:0,class:"text-center"},{default:e(()=>[t.detail.file==null?(s(),d(D,{key:0,src:t.detail.thumbnail.url,alt:t.detail.title},null,8,["src","alt"])):(s(),M("video",{key:1,src:t.detail.file.url,controls:"",type:"video/mp4",class:"video-preview"},null,8,z))]),_:1})):x("",!0),l(b,{class:"text-right"},{default:e(()=>[c("파티명 : "+p(t.detail.partyTitle),1)]),_:1}),l(S,{class:"text-right"},{default:e(()=>[c("작성자 : "+p(t.detail.member.nickname),1)]),_:1}),l(b,{class:"text-right"},{default:e(()=>[c(" 생성 날짜 : "+p(g(q)(t.detail.createdTime)),1)]),_:1}),l(E,null,{default:e(()=>[l(B),t.detail.file?(s(),d(m,{key:0,color:"blue darken-1",onClick:a[0]||(a[0]=u=>j(t.detail.file.url))},{default:e(()=>[c(" 다운로드 ")]),_:1})):(s(),d(m,{key:1,color:"blue darken-1",onClick:a[1]||(a[1]=u=>A(t.detail.thumbnail.url))},{default:e(()=>[c(" 다운로드 ")]),_:1})),t.detail.member.id==g(U)?(s(),d(m,{key:2,color:"red darken-2",text:"",onClick:a[2]||(a[2]=u=>R(t.detail.id))},{default:e(()=>[c("삭제")]),_:1})):x("",!0)]),_:1})]),_:1})]),_:1},8,["modelValue"])}}},Q=$(G,[["__scopeId","data-v-29821df4"]]);export{Q as A};
