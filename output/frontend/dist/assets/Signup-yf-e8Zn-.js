import{_ as oe,u as se,r as s,c as ue,p as ne,w as K,i as de,f as e,e as t,F as ie,b as u,o as M,q as re,g as n,d as h,h as _,t as me,s as ce,v as ve,x as fe,y as pe,z as _e,A as Ve,B as v,C as be}from"./index-w_VBQHr5.js";import{u as ke}from"./follows-NqGTbhYa.js";import{E as Ce}from"./EmblemList-umnVPmpf.js";const g=y=>(_e("data-v-7d13f70d"),y=y(),Ve(),y),ge=g(()=>_("h2",null,"회원 가입",-1)),ye=g(()=>_("h2",null,"@",-1)),we={style:{color:"white",cursor:"pointer"}},xe=g(()=>_("h2",{style:{color:"white",cursor:"pointer"}},"원하는 구단의 엠블럼을 선택해보세요!",-1)),Ie=g(()=>_("p",null,"인증 코드가 이메일 주소로 전송되었습니다.",-1)),Ee=g(()=>_("p",null," 코드를 입력해 주세요.",-1)),Se={__name:"Signup",setup(y){const B=ke(),R=se(),m=s(""),w=s(""),f=s(""),j=s(""),x=s(""),I=s(""),p=ue(()=>`${x.value}@${I.value}`),q=s([]);ne(()=>{q.value=B.getTeamList()}),K(()=>B.teamList,o=>{q.value=o},{immediate:!0});const r=s({emblemId:"",emblemIcon:"",emblemName:""}),O=s(!1);function F(){O.value=!0}function Z(o){r.value=o}const E=s(!1),S=s(!1),U=s(!1),N=s(!1),Y=()=>{m.value===""&&(S.value=!0),E.value=!1,ve(m.value,o=>{o.data.status===v.OK&&(E.value=!0,U.value=!0)},o=>{o.response.status===v.CONFLICT&&(N.value=!0),o.response.status===500&&console.error(o)})};K(()=>m.value,()=>{E.value=!1});const V=s(!1);function G(){if(x.value===""||I.value===""||!D(p.value)){alert("올바른 이메일을 입력해주세요!");return}fe(p.value,o=>{o.status===v.OK&&(V.value=!0)},o=>{o.response.status===v.CONFLICT&&(console.log(o),alert("이미 사용 중인 이메일입니다!"))})}const T=s(""),H=s(!1),A=s(!1);function J(){const o={email:p.value,code:T.value};pe(o,l=>{l.status===v.OK&&(alert("알맞은 인증코드입니다!"),H.value=!0,A.value=!0,V.value=!1)},l=>{console.log(l),l.response.status==="400"&&(console.log(l),alert("인증번호가 다릅니다!"))})}const Q=o=>o.length>=8&&/[!@#$%^&*(),.?":{}|<>]/g.test(o),D=o=>/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(o).toLowerCase());function W(){if(m.value===""||f.value===""||w.value===""||p.value===""||r.value.emblemId===""){alert("모든 내용을 입력해주세요");return}if(!E.value){alert("아이디 중복 검사를 하지 않으셨습니다!");return}if(f.value!==j.value){alert("비밀번호가 일치하지 않습니다.");return}if(!Q(f.value)){alert("비밀번호는 8자리 이상이며, 특수문자를 포함해야 합니다.");return}if(!D(p.value)){alert("올바른 이메일 형식을 입력해주세요.");return}if(!A.value){alert("이메일 인증 검사를 하지 않으셨습니다!");return}if(r.value.emblemId===""){alert("엠블럼은 반드시 골라야 합니다!!");return}const o={loginId:m.value,loginPwd:f.value,nickname:w.value,email:p.value,team:{id:r.value.emblemId}};be(o,l=>{if(l.status===v.CREATE)console.log(l),alert("축하합니다! SPOPARTY의 회원이 되셨습니다!"),window.location.replace("/");else if(l.status===v.CONFLICT){alert("이미 등록된 아이디입니다. ");return}},l=>{console.log(l),alert("히히 회원가입 실패 발사")})}function X(){R.back()}return(o,l)=>{const P=u("v-card-title"),c=u("v-text-field"),d=u("v-col"),i=u("v-btn"),b=u("v-row"),ee=u("v-img"),le=u("v-tooltip"),z=u("v-spacer"),te=u("v-form"),k=u("v-card-text"),C=u("v-card"),ae=u("v-container"),L=u("v-card-actions"),$=u("v-dialog");return M(),de(ie,null,[e(ae,{class:"signup-container"},{default:t(()=>[e(C,{class:"signup-card mx-auto",outlined:""},{default:t(()=>[e(P,{class:"title justify-center"},{default:t(()=>[ge]),_:1}),e(k,null,{default:t(()=>[e(te,{onSubmit:re(W,["prevent"])},{default:t(()=>[e(b,null,{default:t(()=>[e(d,{cols:"9"},{default:t(()=>[e(c,{class:"input",label:"아이디",modelValue:m.value,"onUpdate:modelValue":l[0]||(l[0]=a=>m.value=a),outlined:"",required:""},null,8,["modelValue"])]),_:1}),e(d,{cols:"3"},{default:t(()=>[e(i,{class:"id-check",color:"#333D51",elevation:"1",onClick:Y},{default:t(()=>[n(" 아이디 중복확인 ")]),_:1})]),_:1})]),_:1}),e(c,{class:"input",label:"닉네임",modelValue:w.value,"onUpdate:modelValue":l[1]||(l[1]=a=>w.value=a),outlined:"",required:""},null,8,["modelValue"]),e(c,{class:"input",label:"비밀번호",modelValue:f.value,"onUpdate:modelValue":l[2]||(l[2]=a=>f.value=a),type:"password",outlined:"",required:""},null,8,["modelValue"]),e(c,{class:"input",label:"비밀번호 확인",modelValue:j.value,"onUpdate:modelValue":l[3]||(l[3]=a=>j.value=a),type:"password",outlined:"",required:""},null,8,["modelValue"]),e(b,{align:"center"},{default:t(()=>[e(d,{cols:"12",md:"4",sm:"4",xs:"4"},{default:t(()=>[e(c,{class:"input",label:"이메일",modelValue:x.value,"onUpdate:modelValue":l[4]||(l[4]=a=>x.value=a),outlined:"",required:"",dense:""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"1",sm:"1",xs:"1",class:"text-center",style:{color:"white"}},{default:t(()=>[ye]),_:1}),e(d,{cols:"12",md:"4",sm:"4",xs:"4"},{default:t(()=>[e(c,{class:"input",label:"도메인",modelValue:I.value,"onUpdate:modelValue":l[5]||(l[5]=a=>I.value=a),outlined:"",required:"",dense:""},null,8,["modelValue"])]),_:1}),e(d,{cols:"12",md:"3",sm:"3",xs:"3"},{default:t(()=>[e(i,{class:"email-verify",color:"#333D51",elevation:"1",onClick:G},{default:t(()=>[n("이메일 인증")]),_:1})]),_:1})]),_:1}),r.value.emblemId!==""?(M(),h(b,{key:0,justify:"center",align:"center",class:"emblem mx-2",onClick:F},{default:t(()=>[e(d,{cols:"auto",class:"pa-0"},{default:t(()=>[e(ee,{src:r.value.emblemIcon,alt:r.value.emblemName,class:"mx-2",style:{width:"50px",height:"50px",cursor:"pointer"}},null,8,["src","alt"])]),_:1}),e(d,{cols:"auto",class:"pa-0"},{default:t(()=>[_("h2",we,me(r.value.emblemName),1)]),_:1})]),_:1})):(M(),h(b,{key:1,justify:"center",align:"center",class:"emblem mx-2 my-2",onClick:F},{default:t(()=>[e(le,{location:"top",activator:"parent"},{default:t(()=>[n("대표 엠블렘을 선택하세요!")]),_:1}),xe]),_:1})),O.value?(M(),h(Ce,{key:2,"team-list":q.value,onEmblemListClose:l[6]||(l[6]=a=>O.value=!1),onSelectEmblem:l[7]||(l[7]=a=>Z(a))},null,8,["team-list"])):ce("",!0),e(b,null,{default:t(()=>[e(d,{cols:"3"},{default:t(()=>[e(i,{color:"warning",onClick:X,block:""},{default:t(()=>[n("이전")]),_:1})]),_:1}),e(z),e(d,{cols:"5"},{default:t(()=>[e(i,{color:"primary",type:"submit",block:""},{default:t(()=>[n("회원가입")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e($,{modelValue:S.value,"onUpdate:modelValue":l[9]||(l[9]=a=>S.value=a),class:"idCheckModal",persistent:""},{default:t(()=>[e(C,{class:"modals"},{default:t(()=>[e(k,null,{default:t(()=>[n(" 아이디를 입력하세요! ")]),_:1}),e(L,{class:"justify-center"},{default:t(()=>[e(i,{color:"red",onClick:l[8]||(l[8]=a=>S.value=!1)},{default:t(()=>[n(" 확인")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($,{modelValue:U.value,"onUpdate:modelValue":l[11]||(l[11]=a=>U.value=a),class:"idCheckModal",persistent:""},{default:t(()=>[e(C,{class:"modals"},{default:t(()=>[e(k,null,{default:t(()=>[n(" 사용 가능한 아이디입니다. ")]),_:1}),e(L,{class:"justify-center"},{default:t(()=>[e(i,{class:"button",onClick:l[10]||(l[10]=a=>U.value=!1)},{default:t(()=>[n("확인")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($,{modelValue:N.value,"onUpdate:modelValue":l[13]||(l[13]=a=>N.value=a),class:"idCheckModal",persistent:""},{default:t(()=>[e(C,{class:"modals"},{default:t(()=>[e(k,null,{default:t(()=>[n(" 중복된 아이디입니다! ")]),_:1}),e(L,{class:"justify-center"},{default:t(()=>[e(i,{color:"red darken-1",onClick:l[12]||(l[12]=a=>N.value=!1)},{default:t(()=>[n("확인")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($,{modelValue:V.value,"onUpdate:modelValue":l[16]||(l[16]=a=>V.value=a),width:"400",persistent:""},{default:t(()=>[e(C,{class:"modals justify-center"},{default:t(()=>[e(P,{class:"text-h5"},{default:t(()=>[n("이메일 인증")]),_:1}),e(k,null,{default:t(()=>[Ie,Ee,e(c,{solo:"",placeholder:"인증 코드 입력",type:"text",modelValue:T.value,"onUpdate:modelValue":l[14]||(l[14]=a=>T.value=a)},null,8,["modelValue"])]),_:1}),e(L,null,{default:t(()=>[e(z),e(i,{class:"button",onClick:J},{default:t(()=>[n("인증")]),_:1}),e(i,{color:"grey",onClick:l[15]||(l[15]=a=>V.value=!1)},{default:t(()=>[n("취소")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},$e=oe(Se,[["__scopeId","data-v-7d13f70d"]]);export{$e as default};
